查看BIT测试的执行流程代码，以便详细描述整个操作过程。
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\desktop\applets\新建文件夹\test_executor.py
          
# BIT测试完整流程描述

## 测试环境
- **测试对象**：单个或多个主板（每块主板配置一块或多块硬盘）
- **测试类型**：BIT（Burn-In Test，老化测试）
- **测试容量**：可配置（0-100%）
- **测试工具**：基于Python的测试框架

## 完整流程

### 1. 测试初始化阶段
- **时间点**：测试开始前
- **操作步骤**：
  1. **解析测试命令**：
     - 获取测试容量百分比参数（0-100%）
  2. **加载BIT测试配置**：
     - 温度检查间隔：30秒（默认）
  3. **更新测试状态**：
     - 设置当前测试项为BIT
     - 记录测试开始时间
  4. **选择测试主机**：
     - 获取选中的测试主板列表
  5. **更新主机进度信息**：
     - 为每个主机设置测试项和开始时间

### 2. 主机唤醒和连接阶段
- **开始时间**：T1
- **操作步骤**：
  1. **唤醒主机**（T1）：
     - 发送WOL唤醒命令到所有选中的主板
     - 等待40秒让主机完全启动
  2. **等待主机上线**（T1+40s）：
     - 检查所有主机是否成功启动并在线
     - 如果超时，测试失败并退出
  3. **连接主机**（T1+40s+Δt1）：
     - 建立SSH连接到所有测试主机
     - 如果连接失败，测试失败并退出

### 3. SSD信息收集和检查阶段
- **开始时间**：T1+40s+Δt1+Δt2
- **操作步骤**：
  1. **获取SSD信息**：
     - 收集所有主机上SSD的详细信息（序列号、型号、厂商等）
  2. **SSD信息一致性检查**：
     - 验证SSD信息的一致性
     - 如果检查失败，测试失败并退出
  3. **获取初始温度**：
     - 记录所有SSD的初始温度数据

### 4. 温度监控阶段
- **开始时间**：T1+40s+Δt1+Δt2+Δt3
- **操作步骤**：
  1. **启动温度监控**：
     - 启动温度监控线程
     - 按照配置的时间间隔（默认30秒）收集SSD温度数据

### 5. 测试执行阶段
- **开始时间**：T1+40s+Δt1+Δt2+Δt3+Δt4
- **操作步骤**：
  1. **获取SSD信息**（用于测试）：
     - 再次获取SSD信息，确保数据最新
  2. **执行FIO测试**：
     - 为每个主机创建线程执行测试
     - FIO命令格式：
       ```
       fio --ioengine=libaio --bs=1M --iodepth=128 --numjobs=1 
       --direct=1 --name=test --rw=write --filename=$i --verify=crc32c 
       --do_verify=1 --group_reporting --size={capacity_percent}%
       ```
     - 其中`{capacity_percent}`为测试容量百分比
  3. **记录测试结果**：
     - 收集FIO测试输出
     - 记录测试状态和任何错误信息

### 6. 温度数据处理阶段
- **开始时间**：T1+40s+Δt1+Δt2+Δt3+Δt4+Δt5
- **操作步骤**：
  1. **停止温度监控**：
     - 停止温度监控线程
  2. **获取结束温度**：
     - 记录所有SSD的最终温度数据
  3. **保存温度摘要**：
     - 计算温度变化
     - 生成温度监控摘要
     - 保存温度监控数据到测试结果文件

### 7. 主机关闭阶段
- **开始时间**：T1+40s+Δt1+Δt2+Δt3+Δt4+Δt5+Δt6
- **操作步骤**：
  1. **关闭主机**：
     - 发送关机命令到所有测试主机
     - 等待15秒让主机完全关闭
  2. **等待主机关机**：
     - 确认所有主机已成功关闭
     - 如果超时，记录警告但继续测试
  3. **断开连接**：
     - 断开与所有测试主机的SSH连接

### 8. 测试总结阶段
- **开始时间**：T1+40s+Δt1+Δt2+Δt3+Δt4+Δt5+Δt6+15s+Δt7
- **操作步骤**：
  1. **计算测试耗时**：
     - 计算从测试开始到结束的总时间
  2. **处理测试结果**：
     - 遍历所有SSD的测试结果
     - 使用测试总结生成器生成标准化的测试总结
  3. **保存测试结果**：
     - 将测试总结追加到对应SSD的测试结果文件
     - 确保所有测试数据都被正确保存

### 9. 测试完成阶段
- **开始时间**：T1+40s+Δt1+Δt2+Δt3+Δt4+Δt5+Δt6+15s+Δt7+Δt8
- **操作步骤**：
  1. **更新测试状态**：
     - 将测试状态设置为完成
  2. **输出测试完成信息**：
     - 记录测试完成日志
     - 通知用户测试已完成

## 关键时间点
- **T1**：测试开始时间
- **T1+40s**：唤醒等待完成时间
- **T1+40s+Δt1**：主机上线完成时间
- **T1+40s+Δt1+Δt2**：主机连接完成时间
- **T1+40s+Δt1+Δt2+Δt3**：SSD信息收集完成时间
- **T1+40s+Δt1+Δt2+Δt3+Δt4**：温度监控启动时间
- **T1+40s+Δt1+Δt2+Δt3+Δt4+Δt5**：测试执行完成时间
- **T1+40s+Δt1+Δt2+Δt3+Δt4+Δt5+Δt6**：温度数据处理完成时间
- **T1+40s+Δt1+Δt2+Δt3+Δt4+Δt5+Δt6+15s**：主机关闭完成时间
- **T1+40s+Δt1+Δt2+Δt3+Δt4+Δt5+Δt6+15s+Δt7**：连接断开完成时间
- **T1+40s+Δt1+Δt2+Δt3+Δt4+Δt5+Δt6+15s+Δt7+Δt8**：测试完成时间
- **总测试时间**：T1+40s+Δt1+Δt2+Δt3+Δt4+Δt5+Δt6+15s+Δt7+Δt8 - T1

## 状态变化
1. **测试初始化** → **主机唤醒**
2. **主机唤醒** → **等待上线** → **连接主机** → **获取SSD信息** → **一致性检查** → **获取初始温度** → **启动温度监控**
3. **启动温度监控** → **获取SSD信息** → **执行FIO测试** → **记录测试结果**
4. **记录测试结果** → **停止温度监控** → **获取结束温度** → **保存温度摘要**
5. **保存温度摘要** → **关闭主机** → **等待关机** → **断开连接**
6. **断开连接** → **计算测试耗时** → **处理测试结果** → **保存测试结果**
7. **保存测试结果** → **更新测试状态** → **输出测试完成信息** → **测试完成**

## 测试结果文件
- **文件路径**：`./nvme_test_log/{测试时间}/{主机名称}/{时间戳}-{SSD序列号}-BIT-{温度}C.txt`
- **文件内容**：
  - SSD信息（序列号、型号、厂商等）
  - FIO测试命令和输出
  - 测试状态和错误信息（如果有）
  - 温度监控数据（开始温度、结束温度、温度变化）
  - 测试总结（标准化格式）

## 注意事项
1. **温度监控**：BIT测试包含完整的温度监控和数据收集
2. **测试容量**：可通过测试命令指定0-100%的测试容量
3. **验证机制**：FIO测试使用`--do_verify=1`进行数据验证
4. **错误处理**：测试过程中的错误会被及时捕获并记录
5. **数据完整性**：测试结果文件包含完整的测试数据和温度信息
6. **标准化总结**：使用测试总结生成器生成标准化的测试总结
7. **并行执行**：支持多主机并行执行测试，提高效率

## 与PCT测试的主要区别
1. **测试轮次**：BIT测试只执行一轮，PCT测试执行多轮
2. **温度监控**：BIT测试包含完整的温度监控，PCT测试没有
3. **FIO命令**：
   - BIT：`--rw=write --do_verify=1 --size={capacity_percent}%`
   - PCT第一轮：`--rw=write --do_verify=0 --size=1G`
   - PCT后续轮：先读（带验证）后写（不带验证）
4. **测试目的**：BIT测试主要用于老化测试，PCT测试主要用于电源循环测试

此流程描述了BIT测试的完整操作过程，可作为测试执行核查的依据，确保实际测试过程符合预期标准和要求。